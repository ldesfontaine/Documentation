# üìÅ SMBClient - Acc√®s aux partages SMB

[‚Üê Retour √† la table des mati√®res](../README.md)

## Connexion aux shares

### Connexion basique
```bash
# Connexion avec authentification
smbclient //targetIP/sharename -U username

# Connexion au share C$ (admin requis)
smbclient //targetIP/C$ -U administrator

# Connexion anonyme
smbclient //targetIP/sharename -N
```

### Liste des shares disponibles
```bash
# Lister les shares (anonyme)
smbclient -L targetIP -N

# Lister les shares avec authentification
smbclient -L targetIP -U username
```

## Commandes dans smbclient

### Navigation et exploration
```bash
ls                    # Lister les fichiers du r√©pertoire courant
dir                   # Alias pour ls
cd directory         # Changer de r√©pertoire
pwd                   # Afficher le r√©pertoire courant
```

### Transfert de fichiers
```bash
# T√©l√©chargement
get filename                    # T√©l√©charger un fichier
mget *.txt                     # T√©l√©charger plusieurs fichiers (pattern)
mget *                         # T√©l√©charger tous les fichiers

# Upload
put localfile                  # Upload un fichier local
put localfile remotename       # Upload avec nouveau nom
mput *.txt                     # Upload multiple
```

### Options de transfert
```bash
# Configuration pour transfert en masse
recurse ON            # Activer la r√©cursion dans les sous-dossiers
prompt OFF           # D√©sactiver les confirmations
mget *               # T√©l√©charger tout r√©cursivement
```

### Commandes syst√®me
```bash
!command             # Ex√©cuter une commande locale
lcd /path/to/local   # Changer le r√©pertoire local
```

## Exemples pratiques

### Exploration compl√®te d'un share
```bash
smbclient //targetIP/Users -U username
# Dans smbclient :
recurse ON
prompt OFF
mget *
```

### Recherche de fichiers sensibles
```bash
# Une fois connect√© :
ls *.txt
ls *.doc*
ls *.pdf
ls *password*
ls *config*
```

### Upload de payload
```bash
smbclient //targetIP/C$ -U administrator
# Dans smbclient :
cd Windows\Temp
put payload.exe
```

## Workflow recommand√©

1. **D√©couverte** : `smbclient -L targetIP -N`
2. **Test d'acc√®s** : Tester chaque share d√©couvert
3. **Exploration** : `ls`, `cd` pour naviguer
4. **Extraction** : `mget *` pour t√©l√©charger les donn√©es
5. **Analyse** : Examiner les fichiers t√©l√©charg√©s

## Gestion des erreurs courantes

### Erreur d'authentification
```bash
# Si erreur NT_STATUS_LOGON_FAILURE
# V√©rifier les credentials avec crackmapexec d'abord
crackmapexec smb targetIP -u username -p password
```

### Erreur d'acc√®s refus√©
```bash
# Si NT_STATUS_ACCESS_DENIED
# Tester avec un autre utilisateur ou share
smbclient //targetIP/Users -U username  # Au lieu de C$
```