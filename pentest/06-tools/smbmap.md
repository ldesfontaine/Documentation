# üî® SMBMap - SMB Share Enumeration

[‚Üê Retour √† la table des mati√®res](../README.md)

## Installation
```bash
# SMBMap est g√©n√©ralement pr√©-install√© sur Kali Linux
# Sinon :
pip install smbmap
```

## Syntaxe g√©n√©rale
```bash
smbmap [options] -H target
```

## √ânum√©ration des shares

### Avec credentials
```bash
# √ânum√©ration basique avec username/password
smbmap -H targetIP -u username -p password

# √ânum√©ration avec domaine
smbmap -H targetIP -u username -p password -d domain

# √ânum√©ration avec hash NTLM
smbmap -H targetIP -u username -p 'aad3b435b51404eeaad3b435b51404ee:hash' -d domain
```

### Acc√®s anonyme
```bash
# Tentative d'acc√®s anonyme
smbmap -H targetIP -u anonymous

# Ou avec guest
smbmap -H targetIP -u guest
```

## Options avanc√©es

### √ânum√©ration r√©cursive
```bash
# Lister r√©cursivement tous les fichiers
smbmap -H targetIP -u username -p password -R

# Limiter la profondeur de r√©cursion
smbmap -H targetIP -u username -p password -R --depth 3
```

### Recherche de fichiers
```bash
# Rechercher des fichiers par pattern
smbmap -H targetIP -u username -p password -R --pattern "*.txt"
smbmap -H targetIP -u username -p password -R --pattern "password*"
smbmap -H targetIP -u username -p password -R --pattern "*.config"
```

### Download et Upload
```bash
# T√©l√©charger un fichier sp√©cifique
smbmap -H targetIP -u username -p password --download 'C$\path\to\file.txt'

# Upload d'un fichier
smbmap -H targetIP -u username -p password --upload '/local/file.txt' 'C$\path\to\destination.txt'
```

### Ex√©cution de commandes
```bash
# Ex√©cuter une commande sur la cible (n√©cessite des privil√®ges admin)
smbmap -H targetIP -u administrator -p password -x 'whoami'
smbmap -H targetIP -u administrator -p password -x 'ipconfig'
```

## Exemples pratiques

### Workflow d'√©num√©ration compl√®te
```bash
# 1. Test d'acc√®s anonyme
smbmap -H targetIP -u anonymous

# 2. Si des credentials sont disponibles
smbmap -H targetIP -u username -p password

# 3. √ânum√©ration r√©cursive pour trouver des fichiers int√©ressants
smbmap -H targetIP -u username -p password -R --pattern "*.txt"
smbmap -H targetIP -u username -p password -R --pattern "*.config"
smbmap -H targetIP -u username -p password -R --pattern "*password*"

# 4. Si privil√®ges admin, ex√©cution de commandes
smbmap -H targetIP -u administrator -p password -x 'net user'
```

### Recherche de fichiers sensibles
```bash
# Recherche de fichiers de configuration
smbmap -H targetIP -u username -p password -R --pattern "*.conf"
smbmap -H targetIP -u username -p password -R --pattern "*.ini"
smbmap -H targetIP -u username -p password -R --pattern "web.config"

# Recherche de fichiers contenant des mots-cl√©s sensibles
smbmap -H targetIP -u username -p password -R --pattern "*backup*"
smbmap -H targetIP -u username -p password -R --pattern "*credential*"
smbmap -H targetIP -u username -p password -R --pattern "*key*"
```

## Interpr√©tation des r√©sultats

### Permissions des shares
```
Disk                                                  	Permissions	Comment
----                                                  	-----------	-------
ADMIN$                                            	READ, WRITE	Remote Admin
C$                                                	READ, WRITE	Default share
IPC$                                              	NO ACCESS	Remote IPC
Users                                             	READ ONLY	
```

**L√©gende :**
- `READ, WRITE` : Acc√®s complet (lecture et √©criture)
- `READ ONLY` : Lecture seule
- `NO ACCESS` : Aucun acc√®s

### Priorit√©s d'exploration
1. **Shares avec WRITE** : Possibilit√© d'upload de payloads
2. **C$ et ADMIN$** : Acc√®s syst√®me complet (admin requis)
3. **Shares personnalis√©s** : Souvent contiennent des donn√©es sensibles
4. **Users** : R√©pertoires utilisateurs avec potentiels fichiers sensibles

## Options utiles
- `-H` : Adresse IP cible
- `-u` : Nom d'utilisateur
- `-p` : Mot de passe
- `-d` : Domaine
- `-R` : √ânum√©ration r√©cursive
- `--depth` : Profondeur de r√©cursion
- `--pattern` : Pattern de recherche de fichiers
- `--download` : T√©l√©charger un fichier
- `--upload` : Upload un fichier
- `-x` : Ex√©cuter une commande